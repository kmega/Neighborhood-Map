{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\kmega\\\\Desktop\\\\Neighborhood-Map\\\\Neighborhood Map Project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"C:\\\\Users\\\\kmega\\\\Desktop\\\\Neighborhood-Map\\\\Neighborhood Map Project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\kmega\\\\Desktop\\\\Neighborhood-Map\\\\Neighborhood Map Project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\kmega\\\\Desktop\\\\Neighborhood-Map\\\\Neighborhood Map Project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\kmega\\\\Desktop\\\\Neighborhood-Map\\\\Neighborhood Map Project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\kmega\\\\Desktop\\\\Neighborhood-Map\\\\Neighborhood Map Project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';// Import GoogleMap component.\nimport GoogleMap from'./GoogleMap';// Import SearchOption component.\nimport SearchOption from'./SearchOption';import'./App.css';// App component starts here.\nvar App=/*#__PURE__*/function(_Component){_inherits(App,_Component);function App(){var _getPrototypeOf2;var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(App)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={// Places that are known in Yelp Fusion API.\nplaces:[{name:'Lakou Cafe',position:{lat:40.67200489142444,lng:-73.93059745430946}},{name:'Coffee Project New York',position:{lat:40.72708904158265,lng:-73.98938208818436}},{name:'Bibble & Sip',position:{lat:40.76290379577729,lng:-73.98533597588539}},{name:'Polo Caffe',position:{lat:40.66620985314623,lng:-73.97861033678055}},{name:'Brooklyn Roasting Company',position:{lat:40.70425544458103,lng:-73.98635789752007}},{name:'Absolute Coffee',position:{lat:40.68819415095485,lng:-73.98763731122017}},{name:'Voyager Espresso',position:{lat:40.70881201448755,lng:-74.00669708848}},{name:'Rebel Coffee',position:{lat:40.73783173312936,lng:-74.00475785136223}},{name:'12 Corners Coffee',position:{lat:40.713863322507656,lng:-73.99040803313255}},{name:'Bluestone Lane',position:{lat:40.73579226932857,lng:-74.00089278817177}},{name:'dot & line',position:{lat:40.684141611296226,lng:-73.98362472653389}},{name:'Blank Slate Tea',position:{lat:40.745300087727664,lng:-73.98437574505806}},{name:'Laughing Man Coffee & Tea',position:{lat:40.71727266255551,lng:-74.01012495160103}}],// Markers array.\nmarkers:[],// Marker that has been clicked.\nclickedMarker:{},// Currently selected place.\ncurrentPlace:'',// Details returned from Yelp Fusion API.\ndetails:{},// User input.\nquery:'',// Initally, I used jQuery to display searchOption, but ReactJs state is just better for this.\ntoggle:'',// Error boolean.\nerror:false};_this.onMarkerClick=function(props,marker){_this.setState({markerShowing:true,currentPlace:props,clickedMarker:marker,details:{}});marker.setAnimation(1);// This method of feching Yelp Fusion requests is from https://forum.freecodecamp.org/t/authorization-http-header-for-yelp-fusion-api-access-token/140974/2.\nvar accessToken='vb8fpMmb4nk4mJ56e54L_meXsAmltZnPO4yWkCANzfxxzo5mlJD2tJ4XBU3LF-0yMEEnXLZH-QJM22W3Xa1RsE8a0bgFRF1kbPZoc6Z2pZxa7hkfj2yKEySqrhZkW3Yx';fetch('https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?latitude='+props.position.lat+'&longitude='+props.position.lng,{headers:{'Authorization':'Bearer '+accessToken}}).then(function(res){return res.json();}).catch(function(){return _this.setState({error:true});}).then(function(data){_this.setState({details:data.businesses[0]});});setTimeout(function(){marker.setAnimation(0);},2000);};_this.defaultSetup=function(){_this.setState({details:{},markerShowing:false,clickedMarker:0});};_this.showShop=function(name){_this.onMarkerClick(_this.state.markers.filter(function(marker){return marker.props.name===name;})[0].props,_this.state.markers.filter(function(marker){return marker.props.name===name;})[0].marker);};_this.markerId=function(id){if(id!==0){_this.setState(function(prevState){return{markers:[].concat(_toConsumableArray(prevState.markers),[id])};});}};_this.showMenu=function(){_this.state.toggle===''?_this.setState({toggle:'open'}):_this.setState({toggle:''});};_this.changeQuery=function(query){_this.setState({query:query});};return _this;}_createClass(App,[{key:\"render\",value:function render(){var _this$state=this.state,toggle=_this$state.toggle,query=_this$state.query,clickedMarker=_this$state.clickedMarker,currentPlace=_this$state.currentPlace,places=_this$state.places,details=_this$state.details,markerShowing=_this$state.markerShowing,error=_this$state.error;return React.createElement(\"section\",{role:\"application\",tabIndex:1},\" \",\" \",React.createElement(SearchOption,{toggle:toggle,showSearchBox:this.showMenu,query:query,changeQuery:this.changeQuery.bind(this),places:places,showShop:this.showShop}),\" \",React.createElement(GoogleMap,{query:query,places:places,markerInfo:this.onMarkerClick,clickedMarker:clickedMarker,currentPlace:currentPlace,details:details,defaultSetup:this.defaultSetup,markerShowing:markerShowing,markerId:this.markerId,error:error}),\" \");}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["C:/Users/kmega/Desktop/Neighborhood-Map/Neighborhood Map Project/src/App.js"],"names":["React","Component","GoogleMap","SearchOption","App","state","places","name","position","lat","lng","markers","clickedMarker","currentPlace","details","query","toggle","error","onMarkerClick","props","marker","setState","markerShowing","setAnimation","accessToken","fetch","headers","then","res","json","catch","data","businesses","setTimeout","defaultSetup","showShop","filter","markerId","id","prevState","showMenu","changeQuery","bind"],"mappings":"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","sourcesContent":["import React, {\r\n    Component\r\n} from 'react';\r\n// Import GoogleMap component.\r\nimport GoogleMap from './GoogleMap';\r\n// Import SearchOption component.\r\nimport SearchOption from './SearchOption';\r\nimport './App.css';\r\n// App component starts here.\r\nclass App extends Component {\r\n    // State for different settings.\r\n    state = {\r\n        // Places that are known in Yelp Fusion API.\r\n        places: [{\r\n                name: 'Lakou Cafe',\r\n                position: {\r\n                    lat: 40.67200489142444,\r\n                    lng: -73.93059745430946\r\n                }\r\n            },\r\n            {\r\n                name: 'Coffee Project New York',\r\n                position: {\r\n                    lat: 40.72708904158265,\r\n                    lng: -73.98938208818436\r\n                }\r\n            },\r\n            {\r\n                name: 'Bibble & Sip',\r\n                position: {\r\n                    lat: 40.76290379577729,\r\n                    lng: -73.98533597588539\r\n                }\r\n            },\r\n            {\r\n                name: 'Polo Caffe',\r\n                position: {\r\n                    lat: 40.66620985314623,\r\n                    lng: -73.97861033678055\r\n                }\r\n            },\r\n            {\r\n                name: 'Brooklyn Roasting Company',\r\n                position: {\r\n                    lat: 40.70425544458103,\r\n                    lng: -73.98635789752007\r\n                }\r\n            },\r\n            {\r\n                name: 'Absolute Coffee',\r\n                position: {\r\n                    lat: 40.68819415095485,\r\n                    lng: -73.98763731122017\r\n                }\r\n            },\r\n            {\r\n                name: 'Voyager Espresso',\r\n                position: {\r\n                    lat: 40.70881201448755,\r\n                    lng: -74.00669708848\r\n                }\r\n            },\r\n            {\r\n                name: 'Rebel Coffee',\r\n                position: {\r\n                    lat: 40.73783173312936,\r\n                    lng: -74.00475785136223\r\n                }\r\n            },\r\n            {\r\n                name: '12 Corners Coffee',\r\n                position: {\r\n                    lat: 40.713863322507656,\r\n                    lng: -73.99040803313255\r\n                }\r\n            },\r\n            {\r\n                name: 'Bluestone Lane',\r\n                position: {\r\n                    lat: 40.73579226932857,\r\n                    lng: -74.00089278817177\r\n                }\r\n            },\r\n            {\r\n                name: 'dot & line',\r\n                position: {\r\n                    lat: 40.684141611296226,\r\n                    lng: -73.98362472653389\r\n                }\r\n            },\r\n            {\r\n                name: 'Blank Slate Tea',\r\n                position: {\r\n                    lat: 40.745300087727664,\r\n                    lng: -73.98437574505806\r\n                }\r\n            },\r\n            {\r\n                name: 'Laughing Man Coffee & Tea',\r\n                position: {\r\n                    lat: 40.71727266255551,\r\n                    lng: -74.01012495160103\r\n                }\r\n            }\r\n        ],\r\n        // Markers array.\r\n        markers: [],\r\n        // Marker that has been clicked.\r\n        clickedMarker: {},\r\n        // Currently selected place.\r\n        currentPlace: '',\r\n        // Details returned from Yelp Fusion API.\r\n        details: {},\r\n        // User input.\r\n        query: '',\r\n        // Initally, I used jQuery to display searchOption, but ReactJs state is just better for this.\r\n        toggle: '',\r\n        // Error boolean.\r\n        error: false\r\n    };\r\n    // On marker click take props and clicked marker and set their state.\r\n    onMarkerClick = (props, marker) => {\r\n        this.setState({\r\n            markerShowing: true,\r\n            currentPlace: props,\r\n            clickedMarker: marker,\r\n            details: {}\r\n        });\r\n        marker.setAnimation(1);\r\n        // This method of feching Yelp Fusion requests is from https://forum.freecodecamp.org/t/authorization-http-header-for-yelp-fusion-api-access-token/140974/2.\r\n        const accessToken = 'vb8fpMmb4nk4mJ56e54L_meXsAmltZnPO4yWkCANzfxxzo5mlJD2tJ4XBU3LF-0yMEEnXLZH-QJM22W3Xa1RsE8a0bgFRF1kbPZoc6Z2pZxa7hkfj2yKEySqrhZkW3Yx';\r\n        fetch('https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?latitude=' + props.position.lat + '&longitude=' + props.position.lng, {\r\n            headers: {\r\n                'Authorization': 'Bearer ' + accessToken\r\n            }\r\n        }).then(res => res.json()).catch(() => this.setState({ error: true })).then(data => {\r\n            this.setState({\r\n                details: data.businesses[0]\r\n            });\r\n        });\r\n        setTimeout(() => {\r\n            marker.setAnimation(0);\r\n        }, 2000);\r\n    }\r\n    // If InfoWindow was closed or another was opened, deselect everything.\r\n    defaultSetup = () => {\r\n        this.setState({\r\n            details: {},\r\n            markerShowing: false,\r\n            clickedMarker: 0\r\n        });\r\n    }\r\n    // On clicking place that's on the list, call onMarkerClick with marker props and name.\r\n    showShop = (name) => {\r\n        this.onMarkerClick(this.state.markers.filter(marker => marker.props.name === name)[0].props, this.state.markers.filter(marker => marker.props.name === name)[0].marker);\r\n    }\r\n    // I wanted to update state based on previous marker and I got it working like this. I used https://forum.freecodecamp.org/t/react-prevstate/86495 to understand it's capabilities.\r\n    markerId = (id) => {\r\n        if (id !== 0) {\r\n            this.setState(prevState => ({\r\n                markers: [...prevState.markers, id]\r\n            }));\r\n        }\r\n    }\r\n    // Function for displaying and hiding search menu.\r\n    showMenu = () => {\r\n        this.state.toggle === '' ? this.setState({\r\n            toggle: 'open'\r\n        }) : this.setState({\r\n            toggle: ''\r\n        })\r\n    }\r\n    // On input change, set query to user input.\r\n    changeQuery = (query) => {\r\n        this.setState({\r\n            query: query\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            toggle,\r\n            query,\r\n            clickedMarker,\r\n            currentPlace,\r\n            places,\r\n            details,\r\n            markerShowing,\r\n            error\r\n        } = this.state;\r\n        return ( <\r\n            section role = 'application'\r\n            tabIndex = {\r\n                1\r\n            } > { /* I created SearchOption component to make this whole app more neat. */ } <\r\n            SearchOption toggle = {\r\n                toggle\r\n            }\r\n            showSearchBox = {\r\n                this.showMenu\r\n            }\r\n            query = {\r\n                query\r\n            }\r\n            changeQuery = {\r\n                this.changeQuery.bind(this)\r\n            }\r\n            places = {\r\n                places\r\n            }\r\n            showShop = {\r\n                this.showShop\r\n            }\r\n            />\r\n            { /* Map starts here. */ } <\r\n            GoogleMap query = {\r\n                query\r\n            }\r\n            places = {\r\n                places\r\n            }\r\n            markerInfo = {\r\n                this.onMarkerClick\r\n            }\r\n            clickedMarker = {\r\n                clickedMarker\r\n            }\r\n            currentPlace = {\r\n                currentPlace\r\n            }\r\n            details = {\r\n                details\r\n            }\r\n            defaultSetup = {\r\n                this.defaultSetup\r\n            }\r\n            markerShowing = {\r\n                markerShowing\r\n            }\r\n            markerId = {\r\n                this.markerId\r\n            }\r\n            error = {\r\n                error\r\n            }\r\n            /> <\r\n            /section>\r\n        );\r\n    }\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}